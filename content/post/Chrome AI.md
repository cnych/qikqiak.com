---
title: Google åœ¨ Chrome ä¸­å†…ç½® AI åŠŸèƒ½
date: 2024-09-28
tags: ["AI", "Chrome", "Gemini"]
keywords: ["AI", "Chrome", "Google", "Gemini", "å†…ç½® AI"]
slug: chrome-built-in-ai
gitcomment: true
wechat: "ai"
category: "AI"
---

åœ¨æœ€è¿‘çš„ Chrome æ›´æ–°ç‰ˆæœ¬ä¸­ï¼Œçœ‹åˆ°ä¸€ä¸ªéå¸¸ä»¤äººå…´å¥‹çš„åŠŸèƒ½ï¼Œé‚£å°±æ˜¯**å†…ç½® AI**ï¼Œæ—¨åœ¨å°† AI æ¨¡å‹ï¼ˆåŒ…æ‹¬å¤§è¯­è¨€æ¨¡å‹ï¼‰ç›´æ¥é›†æˆåˆ°æµè§ˆå™¨ä¸­ã€‚åœ¨ç”¨æˆ·æµè§ˆå™¨ç«¯ä¾§å°±å¯ä»¥ç›´æ¥å¯åŠ¨ Gemini Nano æ¨¡å‹ï¼Œå€ŸåŠ©å†…ç½® AIï¼Œæ‚¨çš„ç½‘ç«™æˆ– Web åº”ç”¨å¯ä»¥æ‰§è¡Œ AI èµ‹èƒ½çš„ä»»åŠ¡ï¼Œè€Œæ— éœ€éƒ¨ç½²æˆ–ç®¡ç† è‡ªå·±çš„ AI æ¨¡å‹ã€‚

{{< bilibili src="//player.bilibili.com/player.html?isOutside=true&aid=113215069685818&bvid=BV12YxTeRErH&cid=26046237383&p=1" >}}

<!--more-->

ä¸è‡ªè¡Œå®ç°è®¾å¤‡ç«¯ AI ç›¸æ¯”ï¼Œå†…ç½® AI å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

- éƒ¨ç½²ç®€å•ï¼šåœ¨åˆ†å‘æ¨¡å‹æ—¶ï¼Œæµè§ˆå™¨ä¼šè€ƒè™‘è®¾å¤‡çš„åŠŸèƒ½å¹¶ç®¡ç†æ¨¡å‹çš„æ›´æ–°ã€‚è¿™æ„å‘³ç€ï¼Œæ‚¨æ— éœ€è´Ÿè´£é€šè¿‡ç½‘ç»œä¸‹è½½æˆ–æ›´æ–°å¤§å‹æ¨¡å‹ã€‚æ‚¨æ— éœ€è§£å†³å­˜å‚¨ç©ºé—´é©±é€ã€è¿è¡Œæ—¶å†…å­˜é¢„ç®—ã€æå–è´¹ç”¨å’Œå…¶ä»–é—®é¢˜ã€‚
- ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿï¼šæµè§ˆå™¨çš„ AI è¿è¡Œæ—¶ç»è¿‡ä¼˜åŒ–ï¼Œå¯å……åˆ†åˆ©ç”¨å¯ç”¨çš„ç¡¬ä»¶ï¼ˆæ— è®ºæ˜¯ GPUã€NPU è¿˜æ˜¯å›é€€åˆ° CPUï¼‰ã€‚å› æ­¤ï¼Œæ‚¨çš„åº”ç”¨å¯ä»¥åœ¨æ¯éƒ¨è®¾å¤‡ä¸Šå®ç°æœ€ä½³æ€§èƒ½ã€‚

æœ‰äº†å†…ç½®çš„ AI æ–¹æ³•ï¼Œåœ¨è®¾å¤‡ä¸Šæ‰§è¡Œ AI ä»»åŠ¡å˜å¾—è½»è€Œæ˜“ä¸¾ï¼Œè¿™å¸¦æ¥äº†å¾ˆå¤šå¥½å¤„ï¼š

- å¯¹æ•æ„Ÿæ•°æ®çš„æœ¬åœ°å¤„ç†ï¼šè®¾å¤‡ç«¯ AI å¯ä»¥æé«˜æ‚¨çš„éšç§ä¿æŠ¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨å¤„ç†æ•æ„Ÿæ•°æ®ï¼Œåˆ™å¯ä»¥é€šè¿‡ç«¯åˆ°ç«¯åŠ å¯†å‘ç”¨æˆ·æä¾› AI åŠŸèƒ½ã€‚
- ç®€æ´çš„ç”¨æˆ·ä½“éªŒï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ— éœ€å¾€è¿”äºæœåŠ¡å™¨æ„å‘³ç€æ‚¨å¯ä»¥æä¾›è¿‘ä¹å³æ—¶çš„ç»“æœã€‚è®¾å¤‡ç«¯ AI å¯ä»¥å†³å®šä¸€é¡¹åŠŸèƒ½æ˜¯å¦å¯è¡Œï¼Œä»¥åŠç”¨æˆ·ä½“éªŒæ˜¯å¦ç†æƒ³ã€‚
- æ›´å¹¿æ³›åœ°ä½¿ç”¨ AIï¼šç”¨æˆ·è®¾å¤‡å¯ä»¥æ‰¿æ‹…éƒ¨åˆ†å¤„ç†è´Ÿè½½ï¼Œä»¥æ¢å–å¯¹æ›´å¤šåŠŸèƒ½çš„ä½¿ç”¨æƒé™ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æä¾›é«˜çº§ AI åŠŸèƒ½ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ä½¿ç”¨è®¾å¤‡ç«¯ AI åŠŸèƒ½æ¥é¢„è§ˆè¿™äº›åŠŸèƒ½ï¼Œè¿™æ ·æ½œåœ¨å®¢æˆ·æ‰èƒ½çœ‹åˆ°æ‚¨äº§å“çš„ä¼˜åŠ¿ï¼Œé¢å¤–ä»˜è´¹è¿™ç§æ··åˆæ–¹æ³•è¿˜æœ‰åŠ©äº å°¤å…¶æ˜¯åœ¨å¸¸ç”¨ç”¨æˆ·æµä¸­ã€‚
- ç¦»çº¿ AI ä½¿ç”¨ï¼šå³ä½¿æ²¡æœ‰è¿æ¥åˆ°äº’è”ç½‘ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨ AI åŠŸèƒ½ã€‚è¿™æ„å‘³ç€æ‚¨çš„ç½‘ç«™å’Œ Web åº”ç”¨å¯ä»¥æŒ‰é¢„æœŸè¿è¡Œ æˆ–ç½‘ç»œè¿æ¥å¤šå˜æ—¶ã€‚

![Chrome AI](https://picdn.youdianzhishi.com/images/1729953234343.png)

å†…ç½® AI å¯é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼å¢å¼ºæ‚¨çš„ç½‘ç«™æˆ– Web åº”ç”¨ï¼š

- AI å¢å¼ºçš„å†…å®¹æ¶ˆè´¹ï¼šåŒ…æ‹¬æ‘˜è¦ã€ç¿»è¯‘ã€å›ç­”å…³äºæŸäº›å†…å®¹ã€åˆ†ç±»å’Œç‰¹å¾çš„é—®é¢˜ã€‚
- AI æ”¯æŒçš„å†…å®¹åˆ›ä½œï¼šä¾‹å¦‚æ’°å†™ååŠ©ã€æ ¡å¯¹ã€è¯­æ³•æ›´æ­£å’Œé‡æ–°è¡¨è¿°ã€‚

## å†…ç½® AI API

å†…ç½® AI API æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥è®¿é—®è®¾å¤‡ä¸Šçš„ AI æ¨¡å‹ï¼Œå¹¶å¤„ç†ç»“æœï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ç°é˜¶æ®µæä¾›çš„ API å±äºå®éªŒæ€§é˜¶æ®µï¼Œå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ª APIï¼š

**Prompt API**

é€šè¿‡æ­¤ APIï¼Œæˆ‘ä»¬å¯ä»¥å°†è‡ªç„¶è¯­è¨€æŒ‡ä»¤å‘é€åˆ° Chrome ä¸­çš„ Gemini Nano å®ä¾‹ã€‚

**Summarization API**

å€ŸåŠ©æ­¤ APIï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ å†…ç½® Gemini Nanoï¼Œç”¨äºç²¾ç®€é•¿è§†é¢‘å†…å®¹ç­‰ã€‚ é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š

- ä¼šè®®è½¬å†™æ¦‚è§ˆï¼ˆé€‚ç”¨äºè¾ƒæ™šåŠ å…¥ä¼šè®®çš„äººå‘˜ï¼‰æˆ–é‚£äº›é”™è¿‡äº†ä¼šè®®çš„ç”¨æˆ·ã€‚
- æœ‰å…³å®¢æˆ·å…³ç³»çš„æ”¯æŒå¯¹è¯è¦ç‚¹ç®¡ç†ã€‚
- å¤šæ¡å•†å“è¯„ä»·çš„æ‘˜è¦ã€‚
- é•¿ç¯‡æ–‡ç« ä¸­çš„è¦ç‚¹ï¼Œå¯å¸®åŠ©è¯»è€…ç¡®å®šæ–‡ç« æ˜¯å¦ç›¸å…³ã€‚
- ä¸ºæ–‡ç« ç”Ÿæˆæ ‡é¢˜è‰ç¨¿ã€‚
- æ€»ç»“è®ºå›ä¸­çš„é—®é¢˜ï¼Œä»¥å¸®åŠ©ä¸“å®¶æ‰¾åˆ°ä¸å…¶ä¸“ä¸šé¢†åŸŸæœ€ç›¸å…³çš„é—®é¢˜ã€‚

**Language Detection API**

å€ŸåŠ©æ­¤ APIï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®çš„ Gemini Nano æ¥æ£€æµ‹ç”¨æˆ·è¯­è¨€ï¼Œè¨€æ£€æµ‹æœ‰å¤šç§ä½¿ç”¨åœºæ™¯ï¼š

- ç¡®å®šæœªçŸ¥çš„æºè¯­è¨€ï¼Œä»¥ä¾¿åç»­ç¿»è¯‘ï¼Œç”¨æˆ·æ— éœ€åŒæ—¶æŒ‡å®šè¿™ä¸¤ç§è¯­è¨€ã€‚
- ä¸ºæ–‡æœ¬æ·»åŠ æ ‡ç­¾ï¼Œä»¥æ”¹å–„åœ¨çº¿ç¤¾äº¤ç½‘ç»œç½‘ç«™ä¸­å±å¹•é˜…è¯»å™¨çš„å‘éŸ³ã€‚

**Writer API**

å€ŸåŠ©æ­¤ APIï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®çš„ Gemini Nano æ¥æ’°å†™ååŠ©ã€æ ¡å¯¹ã€è¯­æ³•æ›´æ­£å’Œé‡æ–°è¡¨è¿°ã€‚

**ReWriter API**

å€ŸåŠ©æ­¤ APIï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®çš„ Gemini Nano æ¥ä¿®æ”¹å’Œé‡æ„æ–‡æœ¬ã€‚

## é…ç½®

è¦åœ¨ Chrome æµè§ˆå™¨ä¸­ä½¿ç”¨å†…ç½® AI èƒ½åŠ›ï¼Œéœ€è¦ä½¿ç”¨ Chrome Dev æˆ– Canary ç‰ˆæœ¬ï¼Œå¹¶ç¡®è®¤ç‰ˆæœ¬å·å¤§äºç­‰äº `128.0.6545.0`ï¼Œ

> è¦ç¡®ä¿æ‚¨è‡³å°‘æœ‰ 22 GB çš„å¯ç”¨å­˜å‚¨ç©ºé—´ï¼Œå¦‚æœä¸‹è½½åå¯ç”¨å­˜å‚¨ç©ºé—´ä½äº 10 GBï¼Œæ¨¡å‹å°†å†æ¬¡è¢«åˆ é™¤ã€‚

è¿™é‡Œæˆ‘ä»¬æ¨èå¤§å®¶ä¸‹è½½æœ€æ–°çš„ Canary ç‰ˆæœ¬ï¼Œä¸‹è½½åœ°å€ï¼š`https://www.google.com/intl/en/chrome/canary/`ã€‚

![install chrome canary](https://picdn.youdianzhishi.com/images/1727519587697.png)

å®‰è£…å®Œæˆåç›´æ¥æ‰“å¼€å³å¯ã€‚

é¦–å…ˆè¦ç¡®ä¿ç‰ˆæœ¬å·å¤§äºç­‰äº `128.0.6545.0`ï¼Œå¯ä»¥é€šè¿‡ `chrome://settings/help` æŸ¥çœ‹ã€‚

![chrome version](https://picdn.youdianzhishi.com/images/1727520034791.png)

ç„¶åéœ€è¦é…ç½®å‡ ä¸ª flag æ¥å¯ç”¨ Gemini Nano å’Œ API èƒ½åŠ›ã€‚

åœ¨ Chrome ä¸­æ‰“å¼€ä¸€ä¸ªæ–°é€‰é¡¹å¡ï¼Œè·³è½¬åˆ° `chrome://flags/#optimization-guide-on-device-model`ï¼Œé€‰æ‹© `Enabled BypassPerfRequirement`ï¼Œå¼€å¯æ€§èƒ½ä¼˜åŒ–æŒ‡å—åœ¨è®¾å¤‡ä¸Šæ‰§è¡Œæ¨¡å‹ã€‚

![optimization-guide-on-device-model](https://picdn.youdianzhishi.com/images/1727520173201.png)

ç„¶åè·³è½¬åˆ° `chrome://flags/#prompt-api-for-gemini-nano`ï¼Œé€‰æ‹© `Enabled`ã€‚

![enable-prompt-api](https://picdn.youdianzhishi.com/images/1727520377230.png)

è¯¥æ ‡å¿—æ˜¯ç”¨æ¥å¯ç”¨ Prompt API çš„ï¼Œå¯ç”¨åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Prompt API æ¥è°ƒç”¨ Gemini Nano æ¨¡å‹ï¼ŒåŒæ ·å¯¹äºå¦å¤–çš„å‡ ä¸ª APIï¼Œå¦‚æœè¦ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å¼€å¯å¯¹åº”çš„æ ‡å¿—ã€‚

å¯ç”¨å®Œæˆåï¼Œæˆ‘ä»¬è¿˜éœ€è¦é‡å¯æµè§ˆå™¨ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨å†…ç½®çš„ AI èƒ½åŠ›äº†ã€‚

## ä½¿ç”¨

é¦–å…ˆæˆ‘ä»¬éœ€è¦ç¡®è®¤ Gemini Nano çš„å¯ç”¨æ€§ï¼Œæ‰“å¼€ `DevTools`ï¼Œåœ¨æ§åˆ¶å°ä¸­è¾“å…¥å¦‚ä¸‹ä»£ç ï¼š

```js
(await ai.assistant.capabilities()).available;
```

å¦‚æœè¿”å› `readily`ï¼Œé‚£è¯æ˜ä¸€åˆ‡éƒ½å‡†å¤‡å¥½äº†ã€‚

å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼Œå¾€å¾€è¿™é‡Œéƒ½ä¸ä¼šæˆåŠŸï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

- ğŸ“£ğŸ†• å¼ºåˆ¶ Chrome è¯†åˆ«ä½ æƒ³è¦ä½¿ç”¨æ­¤ APIã€‚ä¸ºæ­¤ï¼Œè¯·æ‰“å¼€ `DevTools` å¹¶åœ¨æ§åˆ¶å°ä¸­å‘é€ä»£ç  `ai.assistant.create();`ï¼Œè¿™å¯èƒ½ä¼šå¤±è´¥ï¼Œä¸è¿‡æ²¡å…³ç³»ã€‚
- ç„¶åé‡æ–°å¯åŠ¨æµè§ˆå™¨ã€‚
- åœ¨ Chrome ä¸­æ‰“å¼€ä¸€ä¸ªæ–°é€‰é¡¹å¡ï¼Œè½¬åˆ° `chrome://components `ï¼Œæ‰¾åˆ° `Optimization Guide On Device Model` é€‰é¡¹ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œé‡å¤ä¸Šé¢ä¸¤ä¸ªæ­¥éª¤ï¼‰ï¼ŒæŸ¥çœ‹ç‰ˆæœ¬å·æ˜¯å¦å¤§äºæˆ–ç­‰äº `2024.5.21.1031`ï¼Œå¦‚æœæ²¡æœ‰ï¼Œç‚¹å‡» `Check for update` å¼ºåˆ¶ä¸‹è½½ï¼Œåˆ™å…¶å®å°±æ˜¯ä¸‹è½½æ¨¡å‹çš„è¿‡ç¨‹ã€‚

![download model](https://picdn.youdianzhishi.com/images/1727521007351.png)

ä¸€æ—¦æ¨¡å‹ä¸‹è½½å®Œæ¯•å¹¶è¾¾åˆ°ä¸Šé¢æ‰€ç¤ºçš„ç‰ˆæœ¬åï¼Œæ‰“å¼€ `DevTools` å¹¶å‘é€`(await ai.assistant.capabilities()).available;`åœ¨æ§åˆ¶å°ä¸­ã€‚å¦‚æœè¿”å› `readily`ï¼Œé‚£ä¹ˆä¸€åˆ‡éƒ½å‡†å¤‡å¥½äº†ã€‚å¦åˆ™ï¼Œè¯·é‡æ–°å¯åŠ¨ï¼Œç¨ç­‰ç‰‡åˆ»ï¼Œç„¶åä»æ­¥éª¤ 1 å¼€å§‹é‡è¯•ã€‚

![model ready](https://picdn.youdianzhishi.com/images/1727521186482.png)

### Prompt API

æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Prompt API æ¥è°ƒç”¨ Gemini Nano æ¨¡å‹äº†ã€‚

**Prompt API åŸºæœ¬ä½¿ç”¨**

Prompt API çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œé¦–å…ˆæ£€æŸ¥æ˜¯å¦å¯ä»¥æ ¹æ®æ¨¡å‹çš„å¯ç”¨æ€§å’Œè®¾å¤‡çš„ç‰¹æ€§åˆ›å»ºä¼šè¯ã€‚

```js
// æ£€æŸ¥æ¨¡å‹æ˜¯å¦å¯ç”¨
const { available, defaultTemperature, defaultTopK, maxTopK } =
  await ai.assistant.capabilities();

// å¦‚æœæ¨¡å‹å¯ç”¨ï¼Œåˆ™åˆ›å»ºä¼šè¯
if (available !== "no") {
  // åˆ›å»ºä¼šè¯
  const session = await ai.assistant.create();

  // ä½¿ç”¨æç¤ºè¯å’Œæ¨¡å‹è¿›è¡Œäº¤äº’
  const result = await session.prompt("Write me a poem");

  // è¾“å‡ºç»“æœ
  console.log(result);
}
```

éš”ä¸€å°ä¼šå„¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ç»“æœäº†ã€‚

![prompt api](https://picdn.youdianzhishi.com/images/1727521425642.png)

**Stream API æµå¼è¾“å‡º**

å¦‚æœæƒ³ä½¿ç”¨ `stream` æµå¼è¾“å‡ºï¼Œåˆ™åªéœ€è¦å°† `session.prompt` æ–¹æ³•æ›¿æ¢ä¸º `session.promptStreaming` æ–¹æ³•å³å¯ã€‚

```js
const { available, defaultTemperature, defaultTopK, maxTopK } =
  await ai.assistant.capabilities();

if (available !== "no") {
  const session = await ai.assistant.create();

  // æµå¼è¾“å‡ºç»“æœ
  const stream = session.promptStreaming("Write me an extra-long poem");

  // éå†ç»“æœ
  for await (const chunk of stream) {
    console.log(chunk);
  }
}
```

ç„¶åå°±å¯ä»¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°æµå¼è¾“å‡ºçš„ç»“æœäº†ã€‚

![stream api](https://picdn.youdianzhishi.com/images/1727521569617.png)

**è·Ÿè¸ªæ¨¡å‹ä¸‹è½½è¿›åº¦**

å¦å¤–æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ `monitor` æ–¹æ³•æ¥è·Ÿè¸ªæ¨¡å‹ä¸‹è½½è¿›åº¦ã€‚

```js
const session = await ai.assistant.create({
  monitor(m) {
    m.addEventListener("downloadprogress", (e) => {
      console.log(`Downloaded ${e.loaded} of ${e.total} bytes.`);
    });
  },
});
```

**Session æŒä¹…åŒ–**

Session æ˜¯ä¸ AI æ¨¡å‹äº¤äº’çš„ä¼šè¯ä¸Šä¸‹æ–‡ï¼Œå…·æœ‰æŒä¹…åŒ–èƒ½åŠ›ï¼Œå¯ä»¥è·¨å¤šä¸ª `prompt` è°ƒç”¨ä¿æŒä¸Šä¸‹æ–‡ã€‚

```js
const session = await ai.assistant.create({
  systemPrompt:
    "You are a friendly, helpful assistant specialized in clothing choices.",
});

const result = await session.prompt(`
  What should I wear today? It's sunny and I'm unsure between a t-shirt and a polo.
`);
console.log(result);

const result2 = await session.prompt(`
  That sounds great, but oh no, it's actually going to rain! New advice??
`);
```

ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª `session`ï¼Œå¹¶è®¾ç½®äº†ä¸€ä¸ª `systemPrompt`ï¼Œç„¶åæˆ‘ä»¬è¿ç»­æ‰§è¡Œäº†ä¸¤æ¬¡ `prompt` æ–¹æ³•ï¼Œåœ¨ç¬¬äºŒæ¬¡çš„ `prompt` æ–¹æ³•ä¸­ï¼Œ`session` ä»ç„¶ä¿ç•™äº†ä¸Šä¸€æ¬¡çš„ä¸Šä¸‹æ–‡ï¼Œè¿™å°±æ˜¯ Session çš„æŒä¹…åŒ–èƒ½åŠ›ã€‚

**Session Clone**

ä¸ºäº†ä¿ç•™èµ„æºï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å…‹éš†ç°æœ‰ä¼šè¯ã€‚å¯¹è¯ä¸Šä¸‹æ–‡å°†è¢«é‡ç½®ï¼Œä½†åˆå§‹æç¤ºæˆ–ç³»ç»Ÿæç¤ºå°†ä¿æŒä¸å˜ã€‚

```js
const clonedSession = await session.clone();
```

**Session options**

æ¯ä¸ªä¼šè¯éƒ½å¯ä»¥æ ¹æ® `topK` å’Œ `temperature` è¿›è¡Œå®šåˆ¶ï¼Œè¿™äº›å‚æ•°çš„é»˜è®¤å€¼å¯ä»¥ä» `ai.assistant.capability()` å¾—åˆ°ã€‚

```js
// è·å–æ¨¡å‹èƒ½åŠ›
const capabilities = await ai.assistant.capabilities();

// åˆå§‹åŒ–ä¼šè¯ï¼Œå¿…é¡»æŒ‡å®š `topK` å’Œ `temperature`ï¼Œæˆ–è€…éƒ½ä¸æŒ‡å®š
const slightlyHighTemperatureSession = await ai.assistant.create({
  temperature: Math.max(capabilities.defaultTemperature * 1.2, 1.0),
  topK: capabilities.defaultTopK,
});
```

**ç³»ç»Ÿæç¤ºè¯**

ç»™åŠ©æ‰‹æŒ‡å®šç³»ç»Ÿæç¤ºè¯ï¼Œå¯ä»¥ç”¨æ¥æŒ‡å®šåŠ©æ‰‹çš„è§’è‰²ã€è¡Œä¸ºç­‰ã€‚

```js
const session = await ai.assistant.create({
  systemPrompt: "Pretend to be an eloquent hamster.",
});
await session.prompt("Do you like nuts?");

// ' As a hamster of unparalleled linguistic ability, I find myself quite adept at responding to the question of whether or not I enjoy the consumption of delectable nuts. Nutty delight indeed!'
```

**Session ä¿¡æ¯**

session å…·æœ‰å¯å¤„ç†çš„æœ€å¤§ Token æ•°ï¼Œå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡ä½¿ç”¨ä¼šè¯å¯¹è±¡ä¸Šçš„ä»¥ä¸‹å±æ€§æ¥æ£€æŸ¥å…¶å½“å‰ä½¿ç”¨æƒ…å†µä»¥åŠè¾¾åˆ°è¯¥é™åˆ¶çš„è¿›åº¦ï¼š

```js
console.log(
  `${session.tokensSoFar}/${session.maxTokens} (${session.tokensLeft} left)`
);
```

> ç›®å‰ï¼Œæ¯ä¸ªæç¤ºçš„ Token æ•°é™åˆ¶ä¸º 1024 ä¸ªä»¤ç‰Œï¼Œä¼šè¯å¯ä»¥ä¿ç•™æœ€åçš„ 4096 ä¸ªä»¤ç‰Œã€‚

**Session ç»ˆæ­¢**

å¦‚æœæ‚¨ä¸å†éœ€è¦ä¼šè¯ï¼Œè¯·è°ƒç”¨ `destroy()` æ¥é‡Šæ”¾èµ„æºã€‚å½“ä¼šè¯è¢«é”€æ¯æ—¶ï¼Œå®ƒå°±ä¸èƒ½å†è¢«ä½¿ç”¨ï¼Œå¹¶ä¸”ä»»ä½•æ­£åœ¨è¿›è¡Œçš„æ‰§è¡Œéƒ½å°†è¢«ä¸­æ­¢ã€‚

```js
await session.prompt(`
  You are a friendly, helpful assistant specialized in clothing choices.
`);

session.destroy();

// promise å°†ä¼šè¢«æ‹’ç»ï¼Œå¹¶æŠ›å‡ºé”™è¯¯ï¼Œè§£é‡Šä¼šè¯å·²è¢«é”€æ¯
await session.prompt(`
  What should I wear today? It's sunny and I'm unsure between a t-shirt and a polo.
`);
```

### Summarization API

åŒæ ·é¦–å…ˆéœ€è¦ä¿è¯å·²ç»å¼€å¯äº†å¯¹åº”çš„æ ‡å¿—ä½ã€‚Summarization API å…è®¸æˆ‘ä»¬ä½¿ç”¨ Gemini Nano æ¥å‹ç¼©é•¿ç¯‡å†…å®¹ï¼Œä»è€Œä½¿ä¿¡æ¯å¯¹ç”¨æˆ·æ¥è¯´æ›´å®¹æ˜“è®¿é—®å’Œæœ‰ç”¨ã€‚

é¦–å…ˆåŒæ ·æ‰“å¼€ `DevTools`ï¼Œåœ¨æ§åˆ¶å°ä¸­è¾“å…¥å¦‚ä¸‹ä»£ç ï¼š

```js
await ai.summarizer.create();
```

å¦‚æœè°ƒç”¨å¤±è´¥ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œè¿™å¯ä»¥è¿«ä½¿ Chrome å»ä¸‹è½½å¯¹åº”çš„æ¨¡å‹ã€‚å¦‚æœè¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºå†…å®¹ï¼Œåˆ™è¯æ˜æ¨¡å‹ä¸‹è½½æˆåŠŸã€‚

![summarization create](https://picdn.youdianzhishi.com/images/1727522370107.png)

ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶å°ä¸­è¾“å…¥å¦‚ä¸‹ä»£ç æ¥æ£€æŸ¥æ¨¡å‹æ˜¯å¦å¯ç”¨ï¼š

```js
await ai.summarizer.capabilities();
```

å¦‚æœè¾“å‡º `readily`ï¼Œåˆ™è¯æ˜æ¨¡å‹å¯ç”¨ã€‚

![readily](https://picdn.youdianzhishi.com/images/1727522486217.png)

æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥æ¥ä½¿ç”¨ Summarization API æ¥å‹ç¼©å†…å®¹äº†ã€‚

```js
const canSummarize = await ai.summarizer.capabilities();

let summarizer;

if (canSummarize && canSummarize.available !== "no") {
  // å¦‚æœæ¨¡å‹å¯ç”¨ï¼Œåˆ™åˆ›å»º summarizer
  if (canSummarize.available === "readily") {
    // åˆ›å»º summarizer
    summarizer = await ai.summarizer.create();
  } else {
    // å¦‚æœæ¨¡å‹ä¸å¯ç”¨ï¼Œåˆ™åˆ›å»º summarizerï¼Œå¹¶ç›‘å¬ä¸‹è½½è¿›åº¦
    summarizer = await ai.summarizer.create();
    summarizer.addEventListener("downloadprogress", (e) => {
      console.log(e.loaded, e.total);
    });
    await summarizer.ready;
  }
} else {
  // The summarizer can't be used at all.
}
```

ç„¶åå¯ä»¥ä½¿ç”¨ä¸Šé¢çš„ `summarizer` å¯¹è±¡æ¥å‹ç¼©å†…å®¹ã€‚

```js
const someUserText =
  'Hiroshi chuckled as he took a sip of his green tea. It was a typical Monday morning in the life of a Chrome engineer, but the project on his desk was far from ordinary. He was tasked with developing the "isTeapot?" API, a quirky new feature for web developers that would return a HTTP 418 "I\'m a teapot" status code if the requested resource was, in fact, a teapot. The day began with a flurry of code reviews and discussions with his team. They debated the finer points of the API\'s design, including whether to support different teapot types like "kyusu" or "tetsubin". Hiroshi argued for a more inclusive approach, allowing developers to specify any teapot-like object in the request headers. After a lively debate, they settled on a flexible design that allowed for custom teapot definitions. Hiroshi dove into the implementation, his fingers dancing across the keyboard as he crafted the code that would bring this peculiar API to life. He added a few Easter eggs for developers who might stumble upon the feature, including a hidden reference to the Hyper Text Coffee Pot Control Protocol. By lunchtime, Hiroshi had a working prototype. He tested it with a few sample requests, grinning as the "418 I\'m a teapot" response popped up on his screen. He imagined the amusement it would bring to web developers who discovered this hidden gem. As the afternoon progressed, Hiroshi fine-tuned the API, adding documentation and examples to help developers get started. He envisioned a future where websites would display playful teapot animations when the "isTeapot?" API was triggered, adding a touch of whimsy to the internet. As the day wound down, Hiroshi pushed his code to the repository, a sense of satisfaction washing over him. The "isTeapot?" API was a small, quirky feature, but it brought a smile to his face. He knew that somewhere out there, a web developer was going to have a lot of fun with it.';

// æ€»ç»“å†…å®¹
const result = await summarizer.summarize(someUserText);

console.log(result);
```

![summarization text](https://picdn.youdianzhishi.com/images/1727522704800.png)

æœ€åå¦‚æœä¸éœ€è¦å†ä½¿ç”¨ summarizer å¯¹è±¡ï¼Œåˆ™éœ€è¦è°ƒç”¨ `destroy` æ–¹æ³•æ¥é‡Šæ”¾èµ„æºã€‚

```js
// é”€æ¯ summarizer å¯¹è±¡ï¼Œé‡Šæ”¾èµ„æº
summarizer.destroy();
```

### Language Detection API

Language Detection API å…è®¸æˆ‘ä»¬ä½¿ç”¨ Gemini Nano æ¥æ£€æµ‹ç”¨æˆ·è¯­è¨€ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦è·³è½¬ `chrome://flags/#language-detection-api`ï¼Œé€‰æ‹© `Enabled`ï¼Œç„¶åé‡å¯æµè§ˆå™¨ï¼Œè¿™æ ·æ‰å¯ä»¥ä½¿ç”¨ Language Detection APIã€‚

![language detection api enabled](https://picdn.youdianzhishi.com/images/1727522880261.png)

ç„¶åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Language Detection API æ¥æ£€æµ‹ç”¨æˆ·è¯­è¨€äº†ã€‚é¦–å…ˆæ‰“å¼€ `DevTools`ï¼Œåœ¨æ§åˆ¶å°ä¸­è¾“å…¥å¦‚ä¸‹ä»£ç ï¼š

```js
await translation.canDetect();
```

å¦‚æœè¾“å‡º `readily`ï¼Œåˆ™è¯æ˜æ¨¡å‹å¯ç”¨ã€‚

åœ¨ä»£ç é‡Œé¢ä½¿ç”¨çš„æ—¶å€™åŒæ ·æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç æ¥åˆ›å»ºä¸€ä¸ªè¯­è¨€æ£€æµ‹å™¨ï¼Œåé¢ç›´æ¥ä½¿ç”¨è¿™ä¸ªå¯¹è±¡æ¥æ£€æµ‹è¯­è¨€å³å¯ï¼š

```js
const canDetect = await translation.canDetect();
let detector;
if (canDetect !== "no") {
  if (canDetect === "readily") {
    // å®ä¾‹åŒ–è¯­è¨€æ£€æµ‹å™¨
    detector = await translation.createDetector();
  } else {
    // å¦‚æœæ¨¡å‹ä¸å¯ç”¨ï¼Œåˆ™åˆ›å»ºè¯­è¨€æ£€æµ‹å™¨ï¼Œå¹¶ç›‘å¬ä¸‹è½½è¿›åº¦
    detector = await translation.createDetector();
    detector.addEventListener("downloadprogress", (e) => {
      console.log(e.loaded, e.total);
    });
    await detector.ready;
  }
} else {
  // è¯­è¨€æ£€æµ‹å™¨ä¸å¯ç”¨
}
```

ç„¶åä½¿ç”¨ä¸Šé¢çš„ `detector` å¯¹è±¡æ¥æ£€æµ‹è¯­è¨€ï¼Œç›´æ¥è°ƒç”¨ `detect` æ–¹æ³•å³å¯ã€‚

```js
const someUserText = "Hallo und herzlich willkommen im Early Preview Program!";
const results = await detector.detect(someUserText);
for (const result of results) {
  // æ˜¾ç¤ºæ‰€æœ‰æ½œåœ¨è¯­è¨€åŠå…¶å¯èƒ½æ€§
  console.log(result.detectedLanguage, result.confidence);
}
```

ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `detector` å¯¹è±¡æ¥æ£€æµ‹ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬ï¼Œç„¶åè¾“å‡ºæ‰€æœ‰æ½œåœ¨è¯­è¨€åŠå…¶å¯èƒ½æ€§ã€‚

![language detection result](https://picdn.youdianzhishi.com/images/1727523140347.png)

æˆ‘ä»¬å¯ä»¥æ ¹æ® `confidence` æ¥åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬æ˜¯å“ªç§è¯­è¨€ï¼Œå¦‚æœ `confidence` å¤§äºæŸä¸ªé˜ˆå€¼ï¼Œåˆ™å¯ä»¥è®¤ä¸ºç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬æ˜¯è¿™ç§è¯­è¨€ã€‚

### Writer å’Œ ReWriter API

Writer å’Œ ReWriter API å…è®¸æˆ‘ä»¬ä½¿ç”¨ Gemini Nano æ¥æ’°å†™ååŠ©ã€æ ¡å¯¹ã€è¯­æ³•æ›´æ­£å’Œé‡æ–°è¡¨è¿°ã€‚

åŒæ ·é¦–å…ˆéœ€è¦ä¿è¯å·²ç»å¼€å¯äº†å¯¹åº”çš„æ ‡å¿—ä½ã€‚

é¦–å…ˆæ‰“å¼€ `DevTools`ï¼Œåœ¨æ§åˆ¶å°ä¸­è¾“å…¥å¦‚ä¸‹ä»£ç ï¼š

```js
await ai.writer.create();
```

è¿™å¯èƒ½éœ€è¦ä¸€ç‚¹æ—¶é—´ååº”ã€‚

![writer create](https://picdn.youdianzhishi.com/images/1727523334062.png)

ç„¶åæˆ‘ä»¬å¯ä»¥æ£€æŸ¥æ¨¡å‹æ˜¯å¦å¯ç”¨ï¼š

```js
(await ai.assistant.capabilities()).available;
```

å¦‚æœè¾“å‡º `readily`ï¼Œåˆ™è¯æ˜æ¨¡å‹å¯ç”¨ã€‚

**Writer API**

Writer API ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼Œç›´æ¥è°ƒç”¨ `write` æ–¹æ³•å³å¯ã€‚

```js
const writer = await ai.writer.create();

const result = await writer.write(
  "A draft for an inquiry to my bank about how to enable wire transfers on my account.(always respond in Chinese)"
);

console.log(result);
```

è¾“å‡ºç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š

![writer api](https://picdn.youdianzhishi.com/images/1727523634167.png)

åŒæ ·å¦‚æœæƒ³ä½¿ç”¨æµå¼è¾“å‡ºï¼Œåˆ™åªéœ€è¦å°† `write` æ–¹æ³•æ›¿æ¢ä¸º `writeStreaming` æ–¹æ³•å³å¯ã€‚

```js
const writer = await ai.writer.create();
const stream = await writer.writeStreaming(
  "A draft for an inquiry to my bank about how to enable wire transfers on my account.(always respond in Chinese)"
);
for await (const chunk of stream) {
  console.log(chunk);
}
```

ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°æµå¼è¾“å‡ºçš„ç»“æœäº†ã€‚

![writer api stream](https://picdn.youdianzhishi.com/images/1727523814016.png)

æ­¤å¤–æˆ‘ä»¬è¿˜å¯ä»¥å…±äº«ä¸Šä¸‹æ–‡å’Œæ¯ä¸ªå†™ä½œä»»åŠ¡çš„ä¸Šä¸‹æ–‡ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```js
const writer = await ai.writer.create({
  sharedContext:
    "This is for publishing on [popular website name], a business and employment-focused social media platform.",
});

const stream = await writer.writeStreaming(
  "loving all this work on GenAI at Google! So much to learn and so many new things I can do!",
  {
    context:
      " The request comes from someone working at a startup providing an e-commerce CMS solution.",
  }
);

for await (const chunk of stream) {
  console.log(chunk);
}
```

ä¸Šé¢ä»£ç ä¸­ï¼Œåœ¨ `writeStreaming` æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä¼ é€’äº†ä¸€ä¸ª `context` å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ç”¨æ¥æŒ‡å®šæ¯ä¸ªå†™ä½œä»»åŠ¡çš„ä¸Šä¸‹æ–‡ï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©æ¨¡å‹æ›´å¥½åœ°ç†è§£ç”¨æˆ·çš„éœ€æ±‚ã€‚

åŒæ ·æœ€åå¦‚æœä¸éœ€è¦å†ä½¿ç”¨ writer å¯¹è±¡ï¼Œåˆ™éœ€è¦è°ƒç”¨ `destroy` æ–¹æ³•æ¥é‡Šæ”¾èµ„æºã€‚

```js
writer.destroy();
```

**ReWriter API**

ReWriter API çš„ä½¿ç”¨æ–¹æ³•å’Œ Writer API éå¸¸ç›¸ä¼¼ï¼Œåªä¸è¿‡ ReWriter API æ˜¯ç”¨æ¥é‡æ–°è¡¨è¿°æ–‡æœ¬çš„ã€‚

```js
const rewriter = await ai.rewriter.create();

const result = await rewriter.rewrite(
  "The quick brown fox jumps over the lazy dog.",
  {
    context: "Rewrite the text in a more concise and clear manner.",
  }
);

console.log(result);
```

`rewrite` æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯éœ€è¦é‡æ–°è¡¨è¿°çš„æ–‡æœ¬ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯é€‰çš„ `context` å‚æ•°ï¼Œç”¨æ¥æŒ‡å®šæ¯ä¸ªå†™ä½œä»»åŠ¡çš„ä¸Šä¸‹æ–‡ï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©æ¨¡å‹æ›´å¥½åœ°ç†è§£ç”¨æˆ·çš„éœ€æ±‚ã€‚

![rewriter api](https://picdn.youdianzhishi.com/images/1727524104872.png)

åŒæ ·å¦‚æœæƒ³ä½¿ç”¨æµå¼è¾“å‡ºï¼Œåˆ™åªéœ€è¦å°† `rewrite` æ–¹æ³•æ›¿æ¢ä¸º `rewriteStreaming` æ–¹æ³•å³å¯ã€‚

## æ€»ç»“

Chrome å†…ç½® AI ä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§è€Œä¾¿æ·çš„å·¥å…·ï¼Œä½¿å¾—åœ¨ Web åº”ç”¨ä¸­é›†æˆå…ˆè¿›çš„ AI åŠŸèƒ½å˜å¾—æ›´åŠ ç®€å•å’Œé«˜æ•ˆã€‚è¿™ä¸€åŠŸèƒ½çš„æ¨å‡ºå°†ä¸ºç”¨æˆ·å¸¦æ¥æ›´æ™ºèƒ½ã€æ›´ä¸ªæ€§åŒ–çš„æµè§ˆä½“éªŒï¼ŒåŒæ—¶ä¹Ÿä¸º Web å¼€å‘å¼€è¾Ÿäº†æ–°çš„å¯èƒ½æ€§ã€‚å…³äº Chrome å†…ç½® AI çš„æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š[https://developer.chrome.com/docs/ai/built-in](https://developer.chrome.com/docs/ai/built-in)ã€‚
